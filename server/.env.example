# ==============================================
# ðŸš€ Reels to Telegram Server v4.0 Configuration
# ==============================================

# ==================
# SERVER SETTINGS
# ==================
PORT=3000
NODE_ENV=production

# ==================
# TELEGRAM BOT
# ==================
# Get token from @BotFather
BOT_TOKEN=your_telegram_bot_token_here

# Channel ID or username (with @)
CHANNEL_ID=@your_channel_username

# ==================
# SECURITY & AUTH
# ==================
# API key for basic authentication (min 32 chars)
API_KEY=your-super-secret-api-key-min-32-chars

# JWT secret for enhanced authentication (optional, defaults to API_KEY)
JWT_SECRET=your-jwt-secret-key-for-enhanced-security

# JWT token expiry time (default: 24h)
JWT_EXPIRY=24h

# ==================
# MEMORY LIMITS
# ==================
# Maximum memory per single video (bytes) - 50MB default
MAX_MEMORY_PER_VIDEO=52428800

# Maximum total memory for all videos (bytes) - 200MB default
MAX_TOTAL_MEMORY=209715200

# Maximum file size for downloads (bytes) - 50MB default
MAX_FILE_SIZE=52428800

# ==================
# QUEUE SETTINGS
# ==================
# Maximum concurrent video downloads (1-10)
MAX_CONCURRENT_DOWNLOADS=3

# Maximum videos in queue (minimum 1)
MAX_QUEUE_SIZE=50

# Timeout for single video processing (milliseconds) - 10 minutes
QUEUE_TIMEOUT=600000

# Timeout for yt-dlp download (milliseconds) - 60 seconds
DOWNLOAD_TIMEOUT=60000

# ==================
# PERFORMANCE TUNING
# ==================
# Delay between worker spawns (milliseconds)
WORKER_SPAWN_DELAY=1000

# Queue polling interval (milliseconds)
QUEUE_POLL_INTERVAL=2000

# Memory logging interval (milliseconds, 0 to disable)
MEMORY_LOG_INTERVAL=30000

# Auto cleanup interval for old jobs (milliseconds) - 5 minutes
AUTO_CLEANUP_INTERVAL=300000

# ==================
# MEMORY PROCESSING
# ==================
# Enable in-memory processing (true/false)
MEMORY_PROCESSING=true

# Enable automatic memory cleanup (true/false)
AUTO_MEMORY_CLEANUP=true

# Debug memory operations (true/false)
DEBUG_MEMORY=false

# Memory warning threshold percentage (50-95)
MEMORY_WARNING_THRESHOLD=80

# ==================
# WEBSOCKET SETTINGS
# ==================
# Enable WebSocket real-time updates (true/false)
WEBSOCKET_ENABLED=true

# WebSocket endpoint path
WEBSOCKET_PATH=/ws

# WebSocket ping timeout (milliseconds)
WEBSOCKET_PING_TIMEOUT=60000

# WebSocket ping interval (milliseconds)
WEBSOCKET_PING_INTERVAL=25000

# ==================
# RATE LIMITING
# ==================
# General API rate limit window (milliseconds) - 15 minutes
RATE_LIMIT_WINDOW=900000

# General API max requests per window
RATE_LIMIT_MAX=100

# API-specific rate limit window (milliseconds) - 1 minute
API_RATE_LIMIT_WINDOW=60000

# API-specific max requests per window
API_RATE_LIMIT_MAX=30

# Download rate limit window (milliseconds) - 1 minute
DOWNLOAD_RATE_LIMIT_WINDOW=60000

# Download max requests per window
DOWNLOAD_RATE_LIMIT_MAX=5

# ==================
# OPTIONAL FEATURES
# ==================
# Custom temporary directory (optional)
# TEMP_DIR=./temp

# CORS origins (comma separated, optional)
# CORS_ORIGINS=https://www.instagram.com,chrome-extension://*

# Redis URL for future clustering (optional)
# REDIS_URL=redis://localhost:6379

# Enable Redis queue (true/false, for future versions)
# ENABLE_REDIS_QUEUE=false

# ==================
# ADVANCED MONITORING
# ==================
# Enable Prometheus metrics (true/false)
# ENABLE_METRICS=false

# Metrics port (if different from main port)
# METRICS_PORT=9090

# Log level (debug|info|warn|error)
# LOG_LEVEL=info

# ==================
# PUPPETEER SETTINGS (Optional)
# ==================
# Enable Puppeteer fallback for complex videos (true/false)
# ENABLE_PUPPETEER=false

# Puppeteer headless mode (true/false)
# PUPPETEER_HEADLESS=true

# Puppeteer timeout (milliseconds)
# PUPPETEER_TIMEOUT=30000